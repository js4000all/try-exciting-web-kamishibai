{
  "openapi": "3.1.0",
  "info": {
    "title": "kamishibai-server",
    "version": "0.1.0"
  },
  "paths": {
    "/api/v0/projects": {
      "get": {
        "tags": [
          "projects"
        ],
        "summary": "Get Projects",
        "operationId": "get_projects_api_v0_projects_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v0/projects/{project_id}": {
      "get": {
        "tags": [
          "projects"
        ],
        "summary": "Get Project",
        "operationId": "get_project_api_v0_projects__project_id__get",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Project Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v0/projects/{project_id}/scenario/chapters/{chapter_id}": {
      "get": {
        "tags": [
          "scenario"
        ],
        "summary": "Get Chapter Scenario",
        "operationId": "get_chapter_scenario_api_v0_projects__project_id__scenario_chapters__chapter_id__get",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Project Id"
            }
          },
          {
            "name": "chapter_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Chapter Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChapterScenarioResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v0/projects/{project_id}/saves/{slot}": {
      "put": {
        "tags": [
          "saves"
        ],
        "summary": "Put Save",
        "operationId": "put_save_api_v0_projects__project_id__saves__slot__put",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Project Id"
            }
          },
          {
            "name": "slot",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Slot"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SaveDataV0"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SaveWriteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "saves"
        ],
        "summary": "Get Save",
        "operationId": "get_save_api_v0_projects__project_id__saves__slot__get",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Project Id"
            }
          },
          {
            "name": "slot",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Slot"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SaveReadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health",
        "operationId": "health_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object",
                  "title": "Response Health Health Get"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ChapterScenarioResponse": {
        "properties": {
          "project_id": {
            "type": "string",
            "title": "Project Id"
          },
          "chapter_id": {
            "type": "string",
            "title": "Chapter Id"
          },
          "scenario": {
            "$ref": "#/components/schemas/ScenarioV0"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings"
          }
        },
        "type": "object",
        "required": [
          "project_id",
          "chapter_id",
          "scenario",
          "warnings"
        ],
        "title": "ChapterScenarioResponse"
      },
      "ChoiceResult": {
        "properties": {
          "at": {
            "type": "string",
            "pattern": "^.+#[0-9]+$",
            "title": "At"
          },
          "choice_id": {
            "type": "string",
            "minLength": 1,
            "title": "Choice Id"
          },
          "selected_index": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Selected Index"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "at",
          "choice_id",
          "selected_index"
        ],
        "title": "ChoiceResult"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "LogEntry": {
        "properties": {
          "seq": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Seq"
          },
          "kind": {
            "type": "string",
            "minLength": 1,
            "title": "Kind"
          },
          "payload": {
            "additionalProperties": true,
            "type": "object",
            "title": "Payload"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "seq",
          "kind",
          "payload"
        ],
        "title": "LogEntry"
      },
      "Position": {
        "properties": {
          "label": {
            "type": "string",
            "minLength": 1,
            "title": "Label"
          },
          "index": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Index"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "label",
          "index"
        ],
        "title": "Position"
      },
      "ProjectDetailResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "summary": {
            "type": "string",
            "title": "Summary"
          },
          "entry_chapter": {
            "type": "string",
            "title": "Entry Chapter"
          },
          "chapters": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Chapters"
          },
          "scenario_revision": {
            "type": "string",
            "title": "Scenario Revision"
          },
          "assets_base_url": {
            "type": "string",
            "title": "Assets Base Url"
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "summary",
          "entry_chapter",
          "chapters",
          "scenario_revision",
          "assets_base_url"
        ],
        "title": "ProjectDetailResponse"
      },
      "ProjectListResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/ProjectSummary"
            },
            "type": "array",
            "title": "Items"
          }
        },
        "type": "object",
        "required": [
          "items"
        ],
        "title": "ProjectListResponse"
      },
      "ProjectSummary": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "summary": {
            "type": "string",
            "title": "Summary"
          },
          "entry_chapter": {
            "type": "string",
            "title": "Entry Chapter"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "summary",
          "entry_chapter",
          "updated_at"
        ],
        "title": "ProjectSummary"
      },
      "RngState": {
        "properties": {
          "seed": {
            "type": "string",
            "minLength": 1,
            "title": "Seed"
          },
          "step": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Step"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "seed",
          "step"
        ],
        "title": "RngState"
      },
      "SaveDataV0": {
        "properties": {
          "state_version": {
            "type": "string",
            "const": "0",
            "title": "State Version"
          },
          "scenario_ref": {
            "$ref": "#/components/schemas/ScenarioRef"
          },
          "position": {
            "$ref": "#/components/schemas/Position"
          },
          "variables": {
            "additionalProperties": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                },
                {
                  "type": "number"
                },
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "propertyNames": {
              "minLength": 1
            },
            "type": "object",
            "title": "Variables"
          },
          "read_history": {
            "items": {
              "type": "string",
              "pattern": "^.+#[0-9]+$"
            },
            "type": "array",
            "title": "Read History"
          },
          "log": {
            "items": {
              "$ref": "#/components/schemas/LogEntry"
            },
            "type": "array",
            "title": "Log"
          },
          "choice_results": {
            "items": {
              "$ref": "#/components/schemas/ChoiceResult"
            },
            "type": "array",
            "title": "Choice Results"
          },
          "rng": {
            "$ref": "#/components/schemas/RngState"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "state_version",
          "scenario_ref",
          "position",
          "variables",
          "rng"
        ],
        "title": "SaveDataV0"
      },
      "SaveReadResponse": {
        "properties": {
          "project_id": {
            "type": "string",
            "title": "Project Id"
          },
          "slot": {
            "type": "string",
            "title": "Slot"
          },
          "saved_at": {
            "type": "string",
            "format": "date-time",
            "title": "Saved At"
          },
          "data": {
            "$ref": "#/components/schemas/SaveDataV0"
          }
        },
        "type": "object",
        "required": [
          "project_id",
          "slot",
          "saved_at",
          "data"
        ],
        "title": "SaveReadResponse"
      },
      "SaveWriteResponse": {
        "properties": {
          "project_id": {
            "type": "string",
            "title": "Project Id"
          },
          "slot": {
            "type": "string",
            "title": "Slot"
          },
          "saved_at": {
            "type": "string",
            "format": "date-time",
            "title": "Saved At"
          }
        },
        "type": "object",
        "required": [
          "project_id",
          "slot",
          "saved_at"
        ],
        "title": "SaveWriteResponse"
      },
      "ScenarioRef": {
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "title": "Name"
          },
          "revision": {
            "type": "string",
            "minLength": 1,
            "title": "Revision"
          },
          "checksum": {
            "type": "string",
            "minLength": 1,
            "title": "Checksum"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "name",
          "revision",
          "checksum"
        ],
        "title": "ScenarioRef"
      },
      "ScenarioV0": {
        "properties": {
          "id": {
            "type": "string",
            "minLength": 1,
            "title": "Id"
          },
          "nodes": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "minItems": 1,
            "title": "Nodes"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "id",
          "nodes"
        ],
        "title": "ScenarioV0"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          },
          "input": {
            "title": "Input"
          },
          "ctx": {
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}
